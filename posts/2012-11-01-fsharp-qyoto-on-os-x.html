<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>FSharp, Qyoto on OS X</title>
    <link rel="stylesheet" href="/content/css/style.css" />
    <link rel="stylesheet" href="/content/css/tooltip.css" />
    <link rel="stylesheet" href="/content/css/tomorrow.css" />
    <link rel="stylesheet" href="/content/css/app.css" />
    <script type="text/javascript" src="/content/js/prettify.js"></script>
    <script type="text/javascript" src="/content/js/tooltip.js"></script>
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
    <script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
  </head>
  <body onload="prettyPrint()">
    <div id="container">
      <header><inner><h1><a style="padding-right: 50px;" href="/">&laquo;</a>FSharp, Qyoto on OS X</h1></inner></header>
      <content>
<p></p>

<p>After playing around with <a href="http://www.mono-project.com/MonoMac">MonoMac</a> I realized most people I know are running windows, most of the time thats fine. But sometimes I'd like to show something off and <a href="http://techbase.kde.org/Development/Languages/Qyoto">Qyoto</a> seems like it could be the perfect cross platform solution!</p>

<p><strong>Warning</strong>, before I go on. I'm quite new to F# and Qt so if theres any errors give me a yell below</p>

<p>I got a bit stuck going through the whole process of setting everything up, so here's what I did for anyone else looking to play with it.</p>

<h3>Compiling Mono</h3>

<p>The mono packages for OS X are 32bit, where as the Qt libraries from homebrew are 64bit.
So based on <a href="https://github.com/adamv/homebrew-alt">adamv's homebrew alt repo</a> I made a mono3 recipe at <a href="https://github.com/aktowns/tappedbrews">aktowns/tappedbrews</a> 
to install simply tap it and brew install.</p>

<pre class='prettyprint  language-'>brew tap aktowns/tappedbrews
brew install aktowns/tappedbrews/mono3</pre>

<p>This will install <a href="http://tirania.org/blog/archive/2012/Oct-22.html">mono 3.0.0</a> and <a href="https://github.com/fsharp/fsharp/tree/3.0.11">FSharp 3.0.11</a> 64bit, next we need Qt and Qyoto</p>

<h3>Getting Qt and compiling Qyoto</h3>

<p>If anyone knows how to imply --HEAD using <code>depends_on</code> in a recipe please tell me! <br />These homebrew recipes are mostly based off the instructions <a href="http://vivekgani.com/blog/2012/09/17/setting-up-qyoto-on-osx-lion/">here</a> with a few minor changes.</p>

<pre class='prettyprint  language-'>brew install qt
brew install aktowns/tappedbrews/smokegen --HEAD
brew install aktowns/tappedbrews/smokeqt --HEAD
brew install aktowns/tappedbrews/qyoto --HEAD</pre>

<h3>Installing monodevelop</h3>

<p>Instead of compiling monodevelop, gtk# and numerous other dependencies its probably a lot easier to just grab the <a href="http://download.xamarin.com/monodevelop/Mac/MonoDevelop-3.0.4.7.dmg">monodevelop binaries</a>, install them and install <a href="http://download.mono-project.com/archive/2.10.9/macos-10-x86/11/MonoFramework-MRE-2.10.9_11.macos10.xamarin.x86.dmg">mono 2.10.9</a> (to run monodevelop in) and select your default runtime as our brew compiled mono.</p>

<p><img src="/content/images/monodevelop.png" alt="monodevelop" /></p>

<p>I noticed a bug with monodevelop (at least on 3.0.4.7) where if you have the binary 3.0.0 and your brew compiled 3.0.0 monodevelop wont let you set the default (it keeps defaulting to the binary 3.0.0) so for now 2.10.9 is fine.</p>

<p>Now lets create a new F# console project!</p>

<h3>An example F# Qyoto Application</h3>

<p>Adapted from <a href="http://zetcode.com/gui/csharpqyoto/introduction/">zetcode's c# qyoto introduction</a></p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">module</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af1', 1)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af1', 1)" class="i">Program</span>

<span class="k">open</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af2', 2)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af2', 2)" class="i">System</span>
<span class="k">open</span> <span class="i">Qyoto</span>

<span class="k">let</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af3', 3)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af3', 3)" class="i">SIGNAL</span> <span class="o">=</span> <span class="i">QWidget</span><span class="o">.</span><span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af3', 4)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af3', 4)" class="i">SIGNAL</span>
<span class="k">let</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af4', 5)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af4', 5)" class="i">SLOT</span> <span class="o">=</span> <span class="i">QWidget</span><span class="o">.</span><span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af4', 6)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af4', 6)" class="i">SLOT</span>

<span class="k">type</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af5', 7)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af5', 7)" class="i">QyotoApp</span>() <span class="k">as</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af6', 8)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af6', 8)" class="i">self</span> <span class="o">=</span> <span class="k">class</span>
  <span class="k">inherit</span> <span class="i">QWidget</span>()

  <span class="k">do</span>
    <span class="k">base</span><span class="o">.</span><span class="i">WindowTitle</span> <span class="o">&lt;-</span> <span class="s">&quot;</span><span class="s">Hello</span><span class="s"> </span><span class="s">World</span><span class="s">!</span><span class="s">&quot;</span>
    <span class="k">base</span><span class="o">.</span><span class="i">ToolTip</span> <span class="o">&lt;-</span> <span class="s">&quot;</span><span class="s">Goodbye</span><span class="s"> </span><span class="s">World</span><span class="s">&quot;</span>

    <span class="i">self</span><span class="o">.</span><span class="i">setupButton</span>
    <span class="i">self</span><span class="o">.</span><span class="i">resizeAndCenter</span> <span class="n">250</span> <span class="n">150</span>

    <span class="k">base</span><span class="o">.</span><span class="i">Show</span>()

  <span class="k">member</span> <span class="i">self</span><span class="o">.</span><span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af7', 9)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af7', 9)" class="i">resizeAndCenter</span> <span class="i">w</span> <span class="i">h</span> <span class="o">=</span>
    <span class="k">let</span> <span class="i">qdw</span> <span class="o">=</span> <span class="k">new</span> <span class="i">QDesktopWidget</span>()
    <span class="k">let</span> <span class="i">x</span> <span class="o">=</span> (<span class="i">qdw</span><span class="o">.</span><span class="i">Width</span> <span class="o">-</span> <span class="i">w</span>) <span class="o">/</span> <span class="n">2</span>
    <span class="k">let</span> <span class="i">y</span> <span class="o">=</span> (<span class="i">qdw</span><span class="o">.</span><span class="i">Height</span> <span class="o">-</span> <span class="i">h</span>) <span class="o">/</span> <span class="n">2</span>
    <span class="k">base</span><span class="o">.</span><span class="i">Resize</span>(<span class="i">w</span>, <span class="i">h</span>)
    <span class="k">base</span><span class="o">.</span><span class="i">Move</span>(<span class="i">x</span>, <span class="i">y</span>)

  <span class="k">member</span> <span class="i">self</span><span class="o">.</span><span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af8', 10)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af8', 10)" class="i">setupButton</span> <span class="o">:</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af9', 11)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af9', 11)" class="i">unit</span> <span class="o">=</span>
    <span class="k">let</span> <span class="i">quit</span> <span class="o">=</span> <span class="k">new</span> <span class="i">QPushButton</span>(<span class="s">&quot;</span><span class="s">Quit</span><span class="s">&quot;</span>, <span class="i">self</span>)    
    <span class="i">self</span><span class="o">.</span><span class="i">Connect</span>(<span class="i">quit</span>, <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af3', 12)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af3', 12)" class="i">SIGNAL</span>(<span class="s">&quot;</span><span class="s">clicked</span><span class="s">(</span><span class="s">)</span><span class="s">&quot;</span>), <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af4', 13)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af4', 13)" class="i">SLOT</span>(<span class="s">&quot;</span><span class="s">quit</span><span class="s">(</span><span class="s">)</span><span class="s">&quot;</span>)) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af10', 14)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af10', 14)" class="i">ignore</span>
    <span class="i">quit</span><span class="o">.</span><span class="i">SetGeometry</span>(<span class="n">50</span>, <span class="n">40</span>, <span class="n">80</span>, <span class="n">30</span>)

  <span class="c">// MARK: Slots</span>
  [&lt;<span class="i">Q_SLOT</span>(<span class="s">&quot;</span><span class="s">quit</span><span class="s">(</span><span class="s">)</span><span class="s">&quot;</span>)&gt;]
  <span class="k">member</span> <span class="i">self</span><span class="o">.</span><span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af11', 15)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af11', 15)" class="i">quit</span>() <span class="o">:</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af9', 16)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af9', 16)" class="i">unit</span> <span class="o">=</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af12', 17)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af12', 17)" class="i">Environment</span><span class="o">.</span><span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af13', 18)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af13', 18)" class="i">Exit</span>(<span class="n">0</span>)
<span class="k">end</span>

<span class="k">let</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af14', 19)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af14', 19)" class="i">main</span>(<span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af15', 20)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af15', 20)" class="i">args</span>) <span class="o">:</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af9', 21)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af9', 21)" class="i">unit</span> <span class="o">=</span>    
    <span class="k">let</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af16', 22)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af16', 22)" class="i">application</span> <span class="o">=</span> <span class="k">new</span> <span class="i">QApplication</span>(<span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af15', 23)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af15', 23)" class="i">args</span>)
    <span class="k">let</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af17', 24)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af17', 24)" class="i">qyotoApp</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af5', 25)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af5', 25)" class="i">QyotoApp</span>()

    <span class="i">QApplication</span><span class="o">.</span><span class="i">Exec</span>() <span class="o">|&gt;</span> <span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af10', 26)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af10', 26)" class="i">ignore</span>

<span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af14', 27)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af14', 27)" class="i">main</span>(<span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af12', 28)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af12', 28)" class="i">Environment</span><span class="o">.</span><span onmouseout="hideTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af18', 29)" onmouseover="showTip(event, '11f3c4a1-72c7-48a5-af08-ced0907477af18', 29)" class="i">GetCommandLineArgs</span>())</pre>
</td>
</tr>
</table><div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af1">module Program</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af2">namespace System</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af3">val SIGNAL : obj<br /><br />Full name: Program.SIGNAL</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af4">val SLOT : obj<br /><br />Full name: Program.SLOT</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af5">Multiple items<br />type QyotoApp =<br />&#160;&#160;inherit obj<br />&#160;&#160;new : unit -&gt; QyotoApp<br />&#160;&#160;member setupButton : unit<br />&#160;&#160;member quit : unit -&gt; unit<br />&#160;&#160;member resizeAndCenter : w:&#39;a -&gt; h:&#39;b -&gt; &#39;c<br /><br />Full name: Program.QyotoApp<br /><br />--------------------<br />new : unit -&gt; QyotoApp</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af6">val self : QyotoApp</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af7">member QyotoApp.resizeAndCenter : w:&#39;a -&gt; h:&#39;b -&gt; &#39;c<br /><br />Full name: Program.QyotoApp.resizeAndCenter</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af8">member QyotoApp.setupButton : unit<br /><br />Full name: Program.QyotoApp.setupButton</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af9">type unit = Unit<br /><br />Full name: Microsoft.FSharp.Core.unit</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af10">val ignore : value:&#39;T -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Operators.ignore</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af11">member QyotoApp.quit : unit -&gt; unit<br /><br />Full name: Program.QyotoApp.quit</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af12">type Environment =<br />&#160;&#160;static member CommandLine : string<br />&#160;&#160;static member CurrentDirectory : string with get, set<br />&#160;&#160;static member CurrentManagedThreadId : int<br />&#160;&#160;static member Exit : exitCode:int -&gt; unit<br />&#160;&#160;static member ExitCode : int with get, set<br />&#160;&#160;static member ExpandEnvironmentVariables : name:string -&gt; string<br />&#160;&#160;static member FailFast : message:string -&gt; unit + 1 overload<br />&#160;&#160;static member GetCommandLineArgs : unit -&gt; string[]<br />&#160;&#160;static member GetEnvironmentVariable : variable:string -&gt; string + 1 overload<br />&#160;&#160;static member GetEnvironmentVariables : unit -&gt; IDictionary + 1 overload<br />&#160;&#160;...<br />&#160;&#160;nested type SpecialFolder<br />&#160;&#160;nested type SpecialFolderOption<br /><br />Full name: System.Environment</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af13">Environment.Exit(exitCode: int) : unit</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af14">val main : args:&#39;a -&gt; unit<br /><br />Full name: Program.main</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af15">val args : &#39;a</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af16">val application : obj</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af17">val qyotoApp : QyotoApp</div>
<div class="tip" id="11f3c4a1-72c7-48a5-af08-ced0907477af18">Environment.GetCommandLineArgs() : string []</div>


<p><img src="/content/images/helloworld.png" alt="hello world" /></p>

<br /><br />
<center>
<g:plusone></g:plusone><a href="https://twitter.com/share" class="twitter-share-button" data-via="ikeeex" data-size="large">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<fb:like send="false" layout="button_count" width="200" show_faces="false"></fb:like>
</center>
<br />
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'randomblogs'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<a style="display: none" href="https://plus.google.com/114748638680077188435?rel=author">G+ Author linking</a>
</content>
      <footer>
        <inner>
          t:<a target="_blank" href="http://www.twitter.com/ikeeex">@ikeeex</a>
          g:<a target="_blank" href="http://www.github.com/aktowns">aktowns</a>
          <br />
          <br />
        </inner>
      </footer>
    </div>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36036802-1']);
  _gaq.push(['_setDomainName', 'ashleytowns.id.au']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </body>
</html>
